const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/build-user-code-eLdotW7M.js","assets/get-html-D9pLuxCy.js","assets/validate-react-ClmdITXA.js","assets/transpile-Tcrxp0Ol.js","assets/parse-transpile-error-BIfbTLtn.js"])))=>i.map(i=>d[i]);
var Hn=Object.defineProperty;var ke=t=>{throw TypeError(t)};var kn=(t,e,n)=>e in t?Hn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>kn(t,typeof e!="symbol"?e+"":e,n),_e=(t,e,n)=>e.has(t)||ke("Cannot "+n);var a=(t,e,n)=>(_e(t,e,"read from private field"),n?n.call(t):e.get(t)),v=(t,e,n)=>e.has(t)?ke("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),T=(t,e,n,r)=>(_e(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),m=(t,e,n)=>(_e(t,e,"access private method"),n);var fe=(t,e,n,r)=>({set _(o){T(t,e,o,n)},get _(){return a(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Xn="modulepreload",Vn=function(t){return"/"+t},Xe={},zt=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=Vn(c),c in Xe)return;Xe[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Xn,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((g,S)=>{f.addEventListener("load",g),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Ve=["cdn.tailwindcss.com","cdn.jsdelivr.net","unpkg.com","*.oaiusercontent.com","threejs.org"],qn=new Set(["https:","http:","wss:"]),mn=/^[a-z][a-z0-9+.-]*:\/\//i;function Se(t,e=!1){const n=new Set;for(let r of t){if(!r)continue;let o=r.trim();mn.test(o)||(o=`https://${o}`);let s=null;try{s=new URL(o)}catch{if(!e)continue}if(!e&&(!s||!qn.has(s.protocol))||s!=null&&s.username||s!=null&&s.password)continue;const i=e?r:s==null?void 0:s.origin;!i||!/^[^\s;,"']+$/.test(i)||n.add(i)}return Array.from(n)}const Te=t=>t.filter(Boolean).map(e=>mn.test(e)?e:`https://${e}`).join(" ");function Yn({resourceDomains:t,frameDomains:e=[],connectDomains:n=[],isTrusted:r}){const o=Te(Ve.concat(Se(t,r))),s=Te(Ve.concat(Se(n,r))),i=Te(Se(e,r));return`<meta http-equiv="Content-Security-Policy" content="${["default-src 'self'",`script-src 'self' 'wasm-unsafe-eval' 'unsafe-inline' 'unsafe-eval' blob: ${o}`,"worker-src 'self' blob:",`style-src 'self' 'unsafe-inline' ${o}`,`style-src-elem 'self' 'unsafe-inline' ${o}`,"style-src-attr 'unsafe-inline'",`img-src 'self' data: ${o}`,`font-src 'self' ${o}`,`connect-src 'self' ${s}`,`media-src 'self' data: ${o}`,"object-src 'none'",`frame-src ${i.length>0?`${i} data: blob:`:"'none'"}`,"base-uri 'self'","upgrade-insecure-requests"].filter(Boolean).join("; ")}">`}let qe=null,Jt=null;function Ye(t){if(!(t!=null&&t.length))return[];if(t.some(n=>n.trim().toLowerCase()==="'none'"))return[];if(t.some(n=>n.trim()==="*"))return["*"];const e=new Set;for(const n of t){const r=n.trim().toLowerCase();r&&e.add(r)}return Array.from(e.values())}function Ze(t,e){const n=Ye(t),r=Ye(e),o=n.includes("*"),s=r.includes("*");if(o&&!s)return"more";if(!o&&s)return"less";if(o&&s)return"equal";const i=new Set(n),l=new Set(r),c=(f,g)=>{for(const S of f)if(!g.has(S))return!1;return!0},u=c(l,i),h=c(i,l);return u&&h?"equal":u&&l.size<i.size?"more":"less"}function Zn(t,e){if(!t)return"more";let n=!1;const r=Ze(t.resourceDomains,e.resourceDomains);if(r==="less")return"less";r==="more"&&(n=!0);const o=Ze(t.connectDomains,e.connectDomains);return o==="less"?"less":(o==="more"&&(n=!0),n?"more":"equal")}function Kn(t){if(typeof t!="string")return t;const e=document.createElement("div");e.innerHTML=t.trim();const n=e.querySelector('meta[http-equiv="Content-Security-Policy"]');if(!n)throw new Error("buildMetaTag() did not produce a CSP <meta> tag");return n}function Jn(t){if(!t)return;const e=Zn(qe,t);if(e==="less")throw new Error("CSP is being loosened");if(e==="equal")return;const n=Yn(t),r=Kn(n);if(Jt!=null&&Jt.isConnected)Jt.replaceWith(r);else{const o=document.head.querySelector('meta[http-equiv="Content-Security-Policy"]');o?o.replaceWith(r):document.head.appendChild(r)}Jt=r,qe=t}var pt=(t=>(t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(pt||{}),bn=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(bn||{});const Qn=new Set(["sendInstrument","notifySecurityPolicyViolation","notifyEnvironmentError","notifyIntrinsicHeight","notifyBackgroundColor","notifyNavigation","notifyEscapeKey","drawBoundingBoxes","getDownloadURL","openPromptInput","updateWidgetState"]),Ke="webplus:set_globals";class tr extends CustomEvent{constructor(n){super(Ke,{detail:{globals:n}});A(this,"type",Ke)}}const Je="openai:set_globals";class er extends CustomEvent{constructor(n){super(Je,{detail:{globals:n}});A(this,"type",Je)}}const wn="root",et=()=>document.getElementById(wn),nr=()=>{const t=et();t==null||t.remove()},rr=t=>{const e=document.createElement("iframe");return e.sandbox="allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms",e.id=wn,t!=null&&t.length&&e.setAttribute("allow",or(t)),document.body.appendChild(e),e},or=t=>t.concat().sort().map(e=>`${e} *`).join("; "),sr=/^rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\s*\)$/,ir=t=>{const e=t.match(sr);return e?parseFloat(e[4])===0:!1},ar=t=>{const e=(t==null?void 0:t.getElementById("root"))??(t==null?void 0:t.documentElement);if(!e)return null;const r=(o=>{const s=[o];for(;s.length>0;){const i=s.shift();if(!i)return null;const{backgroundColor:l}=getComputedStyle(i);if(!ir(l))return l;for(let c of i.children)s.push(c)}return null})(e);return r||null},Qt=t=>{if(!t)return null;const e=t.scrollHeight??0,{height:n}=t.getBoundingClientRect(),r=Math.max(e,n);return Number.isFinite(r)&&r>0?r:null},cr=t=>{var o,s;const e=Array.from(t.children).filter(i=>{const l=i.tagName;return l!=="SCRIPT"&&l!=="STYLE"});if(!e.length)return null;if(e.length===1)return Qt(e[0]);const n=(o=t.getBoundingClientRect)==null?void 0:o.call(t);let r=0;for(const i of e){const l=(s=i.getBoundingClientRect)==null?void 0:s.call(i);if(!l)continue;const c=n?n.top:0,u=l.bottom-c;r=Math.max(r,u)}return r>0?r:null},lr=t=>{if(!t)return null;const e=Qt(t.getElementById("root"));if(e)return e;const n=t.body;if(n){const r=cr(n);if(r)return r;const o=Qt(n);if(o)return o}return Qt(t.documentElement)??Qt(t.scrollingElement)},$t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,En=new Set,ve=typeof process=="object"&&process?process:{},_n=(t,e,n,r)=>{typeof ve.emitWarning=="function"?ve.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let be=globalThis.AbortController,Qe=globalThis.AbortSignal;var pn;if(typeof be>"u"){Qe=class{constructor(){A(this,"onabort");A(this,"_onabort",[]);A(this,"reason");A(this,"aborted",!1)}addEventListener(r,o){this._onabort.push(o)}},be=class{constructor(){A(this,"signal",new Qe);e()}abort(r){var o,s;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const i of this.signal._onabort)i(r);(s=(o=this.signal).onabort)==null||s.call(o,r)}}};let t=((pn=ve.env)==null?void 0:pn.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,_n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const ur=t=>!En.has(t),At=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Sn=t=>At(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?pe:null:null;class pe extends Array{constructor(e){super(e),this.fill(0)}}var Xt;const Dt=class Dt{constructor(e,n){A(this,"heap");A(this,"length");if(!a(Dt,Xt))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=Sn(e);if(!n)return[];T(Dt,Xt,!0);const r=new Dt(e,n);return T(Dt,Xt,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Xt=new WeakMap,v(Dt,Xt,!1);let Ie=Dt;var gn,yn,ot,Z,st,Nt,it,Vt,qt,U,at,W,F,R,q,K,V,k,ct,X,lt,ut,J,ht,vt,Y,Yt,p,Me,Bt,Et,ie,Q,Tn,Gt,Zt,ae,Rt,Ct,ze,ge,ye,z,Fe,te,Lt,De;const Ue=class Ue{constructor(e){v(this,p);v(this,ot);v(this,Z);v(this,st);v(this,Nt);v(this,it);v(this,Vt);v(this,qt);A(this,"ttl");A(this,"ttlResolution");A(this,"ttlAutopurge");A(this,"updateAgeOnGet");A(this,"updateAgeOnHas");A(this,"allowStale");A(this,"noDisposeOnSet");A(this,"noUpdateTTL");A(this,"maxEntrySize");A(this,"sizeCalculation");A(this,"noDeleteOnFetchRejection");A(this,"noDeleteOnStaleGet");A(this,"allowStaleOnFetchAbort");A(this,"allowStaleOnFetchRejection");A(this,"ignoreFetchAbort");v(this,U);v(this,at);v(this,W);v(this,F);v(this,R);v(this,q);v(this,K);v(this,V);v(this,k);v(this,ct);v(this,X);v(this,lt);v(this,ut);v(this,J);v(this,ht);v(this,vt);v(this,Y);v(this,Yt);v(this,Bt,()=>{});v(this,Et,()=>{});v(this,ie,()=>{});v(this,Q,()=>!1);v(this,Gt,e=>{});v(this,Zt,(e,n,r)=>{});v(this,ae,(e,n,r,o)=>{if(r||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});A(this,gn,"LRUCache");const{max:n=0,ttl:r,ttlResolution:o=1,ttlAutopurge:s,updateAgeOnGet:i,updateAgeOnHas:l,allowStale:c,dispose:u,onInsert:h,disposeAfter:f,noDisposeOnSet:g,noUpdateTTL:S,maxSize:b=0,maxEntrySize:O=0,sizeCalculation:y,fetchMethod:E,memoMethod:L,noDeleteOnFetchRejection:d,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:P,allowStaleOnFetchAbort:x,ignoreFetchAbort:_}=e;if(n!==0&&!At(n))throw new TypeError("max option must be a nonnegative integer");const C=n?Sn(n):Array;if(!C)throw new Error("invalid max value: "+n);if(T(this,ot,n),T(this,Z,b),this.maxEntrySize=O||a(this,Z),this.sizeCalculation=y,this.sizeCalculation){if(!a(this,Z)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(L!==void 0&&typeof L!="function")throw new TypeError("memoMethod must be a function if defined");if(T(this,qt,L),E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(T(this,Vt,E),T(this,vt,!!E),T(this,W,new Map),T(this,F,new Array(n).fill(void 0)),T(this,R,new Array(n).fill(void 0)),T(this,q,new C(n)),T(this,K,new C(n)),T(this,V,0),T(this,k,0),T(this,ct,Ie.create(n)),T(this,U,0),T(this,at,0),typeof u=="function"&&T(this,st,u),typeof h=="function"&&T(this,Nt,h),typeof f=="function"?(T(this,it,f),T(this,X,[])):(T(this,it,void 0),T(this,X,void 0)),T(this,ht,!!a(this,st)),T(this,Yt,!!a(this,Nt)),T(this,Y,!!a(this,it)),this.noDisposeOnSet=!!g,this.noUpdateTTL=!!S,this.noDeleteOnFetchRejection=!!d,this.allowStaleOnFetchRejection=!!P,this.allowStaleOnFetchAbort=!!x,this.ignoreFetchAbort=!!_,this.maxEntrySize!==0){if(a(this,Z)!==0&&!At(a(this,Z)))throw new TypeError("maxSize must be a positive integer if specified");if(!At(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");m(this,p,Tn).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!i,this.updateAgeOnHas=!!l,this.ttlResolution=At(o)||o===0?o:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!At(this.ttl))throw new TypeError("ttl must be a positive integer if specified");m(this,p,Me).call(this)}if(a(this,ot)===0&&this.ttl===0&&a(this,Z)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!a(this,ot)&&!a(this,Z)){const I="LRU_CACHE_UNBOUNDED";ur(I)&&(En.add(I),_n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",I,Ue))}}static unsafeExposeInternals(e){return{starts:a(e,ut),ttls:a(e,J),sizes:a(e,lt),keyMap:a(e,W),keyList:a(e,F),valList:a(e,R),next:a(e,q),prev:a(e,K),get head(){return a(e,V)},get tail(){return a(e,k)},free:a(e,ct),isBackgroundFetch:n=>{var r;return m(r=e,p,z).call(r,n)},backgroundFetch:(n,r,o,s)=>{var i;return m(i=e,p,ye).call(i,n,r,o,s)},moveToTail:n=>{var r;return m(r=e,p,te).call(r,n)},indexes:n=>{var r;return m(r=e,p,Rt).call(r,n)},rindexes:n=>{var r;return m(r=e,p,Ct).call(r,n)},isStale:n=>{var r;return a(r=e,Q).call(r,n)}}}get max(){return a(this,ot)}get maxSize(){return a(this,Z)}get calculatedSize(){return a(this,at)}get size(){return a(this,U)}get fetchMethod(){return a(this,Vt)}get memoMethod(){return a(this,qt)}get dispose(){return a(this,st)}get onInsert(){return a(this,Nt)}get disposeAfter(){return a(this,it)}getRemainingTTL(e){return a(this,W).has(e)?1/0:0}*entries(){for(const e of m(this,p,Rt).call(this))a(this,R)[e]!==void 0&&a(this,F)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield[a(this,F)[e],a(this,R)[e]])}*rentries(){for(const e of m(this,p,Ct).call(this))a(this,R)[e]!==void 0&&a(this,F)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield[a(this,F)[e],a(this,R)[e]])}*keys(){for(const e of m(this,p,Rt).call(this)){const n=a(this,F)[e];n!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield n)}}*rkeys(){for(const e of m(this,p,Ct).call(this)){const n=a(this,F)[e];n!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield n)}}*values(){for(const e of m(this,p,Rt).call(this))a(this,R)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield a(this,R)[e])}*rvalues(){for(const e of m(this,p,Ct).call(this))a(this,R)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield a(this,R)[e])}[(yn=Symbol.iterator,gn=Symbol.toStringTag,yn)](){return this.entries()}find(e,n={}){for(const r of m(this,p,Rt).call(this)){const o=a(this,R)[r],s=m(this,p,z).call(this,o)?o.__staleWhileFetching:o;if(s!==void 0&&e(s,a(this,F)[r],this))return this.get(a(this,F)[r],n)}}forEach(e,n=this){for(const r of m(this,p,Rt).call(this)){const o=a(this,R)[r],s=m(this,p,z).call(this,o)?o.__staleWhileFetching:o;s!==void 0&&e.call(n,s,a(this,F)[r],this)}}rforEach(e,n=this){for(const r of m(this,p,Ct).call(this)){const o=a(this,R)[r],s=m(this,p,z).call(this,o)?o.__staleWhileFetching:o;s!==void 0&&e.call(n,s,a(this,F)[r],this)}}purgeStale(){let e=!1;for(const n of m(this,p,Ct).call(this,{allowStale:!0}))a(this,Q).call(this,n)&&(m(this,p,Lt).call(this,a(this,F)[n],"expire"),e=!0);return e}info(e){const n=a(this,W).get(e);if(n===void 0)return;const r=a(this,R)[n],o=m(this,p,z).call(this,r)?r.__staleWhileFetching:r;if(o===void 0)return;const s={value:o};if(a(this,J)&&a(this,ut)){const i=a(this,J)[n],l=a(this,ut)[n];if(i&&l){const c=i-($t.now()-l);s.ttl=c,s.start=Date.now()}}return a(this,lt)&&(s.size=a(this,lt)[n]),s}dump(){const e=[];for(const n of m(this,p,Rt).call(this,{allowStale:!0})){const r=a(this,F)[n],o=a(this,R)[n],s=m(this,p,z).call(this,o)?o.__staleWhileFetching:o;if(s===void 0||r===void 0)continue;const i={value:s};if(a(this,J)&&a(this,ut)){i.ttl=a(this,J)[n];const l=$t.now()-a(this,ut)[n];i.start=Math.floor(Date.now()-l)}a(this,lt)&&(i.size=a(this,lt)[n]),e.unshift([r,i])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const o=Date.now()-r.start;r.start=$t.now()-o}this.set(n,r.value,r)}}set(e,n,r={}){var g,S,b,O,y,E,L;if(n===void 0)return this.delete(e),this;const{ttl:o=this.ttl,start:s,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:c}=r;let{noUpdateTTL:u=this.noUpdateTTL}=r;const h=a(this,ae).call(this,e,n,r.size||0,l);if(this.maxEntrySize&&h>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),m(this,p,Lt).call(this,e,"set"),this;let f=a(this,U)===0?void 0:a(this,W).get(e);if(f===void 0)f=a(this,U)===0?a(this,k):a(this,ct).length!==0?a(this,ct).pop():a(this,U)===a(this,ot)?m(this,p,ge).call(this,!1):a(this,U),a(this,F)[f]=e,a(this,R)[f]=n,a(this,W).set(e,f),a(this,q)[a(this,k)]=f,a(this,K)[f]=a(this,k),T(this,k,f),fe(this,U)._++,a(this,Zt).call(this,f,h,c),c&&(c.set="add"),u=!1,a(this,Yt)&&((g=a(this,Nt))==null||g.call(this,n,e,"add"));else{m(this,p,te).call(this,f);const d=a(this,R)[f];if(n!==d){if(a(this,vt)&&m(this,p,z).call(this,d)){d.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:w}=d;w!==void 0&&!i&&(a(this,ht)&&((S=a(this,st))==null||S.call(this,w,e,"set")),a(this,Y)&&((b=a(this,X))==null||b.push([w,e,"set"])))}else i||(a(this,ht)&&((O=a(this,st))==null||O.call(this,d,e,"set")),a(this,Y)&&((y=a(this,X))==null||y.push([d,e,"set"])));if(a(this,Gt).call(this,f),a(this,Zt).call(this,f,h,c),a(this,R)[f]=n,c){c.set="replace";const w=d&&m(this,p,z).call(this,d)?d.__staleWhileFetching:d;w!==void 0&&(c.oldValue=w)}}else c&&(c.set="update");a(this,Yt)&&((E=this.onInsert)==null||E.call(this,n,e,n===d?"update":"replace"))}if(o!==0&&!a(this,J)&&m(this,p,Me).call(this),a(this,J)&&(u||a(this,ie).call(this,f,o,s),c&&a(this,Et).call(this,c,f)),!i&&a(this,Y)&&a(this,X)){const d=a(this,X);let w;for(;w=d==null?void 0:d.shift();)(L=a(this,it))==null||L.call(this,...w)}return this}pop(){var e;try{for(;a(this,U);){const n=a(this,R)[a(this,V)];if(m(this,p,ge).call(this,!0),m(this,p,z).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(a(this,Y)&&a(this,X)){const n=a(this,X);let r;for(;r=n==null?void 0:n.shift();)(e=a(this,it))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:o}=n,s=a(this,W).get(e);if(s!==void 0){const i=a(this,R)[s];if(m(this,p,z).call(this,i)&&i.__staleWhileFetching===void 0)return!1;if(a(this,Q).call(this,s))o&&(o.has="stale",a(this,Et).call(this,o,s));else return r&&a(this,Bt).call(this,s),o&&(o.has="hit",a(this,Et).call(this,o,s)),!0}else o&&(o.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,o=a(this,W).get(e);if(o===void 0||!r&&a(this,Q).call(this,o))return;const s=a(this,R)[o];return m(this,p,z).call(this,s)?s.__staleWhileFetching:s}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:c=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:S=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:O,forceRefresh:y=!1,status:E,signal:L}=n;if(!a(this,vt))return E&&(E.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:o,noDeleteOnStaleGet:s,status:E});const d={allowStale:r,updateAgeOnGet:o,noDeleteOnStaleGet:s,ttl:i,noDisposeOnSet:l,size:c,sizeCalculation:u,noUpdateTTL:h,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:S,status:E,signal:L};let w=a(this,W).get(e);if(w===void 0){E&&(E.fetch="miss");const P=m(this,p,ye).call(this,e,w,d,O);return P.__returned=P}else{const P=a(this,R)[w];if(m(this,p,z).call(this,P)){const G=r&&P.__staleWhileFetching!==void 0;return E&&(E.fetch="inflight",G&&(E.returnedStale=!0)),G?P.__staleWhileFetching:P.__returned=P}const x=a(this,Q).call(this,w);if(!y&&!x)return E&&(E.fetch="hit"),m(this,p,te).call(this,w),o&&a(this,Bt).call(this,w),E&&a(this,Et).call(this,E,w),P;const _=m(this,p,ye).call(this,e,w,d,O),I=_.__staleWhileFetching!==void 0&&r;return E&&(E.fetch=x?"stale":"refresh",I&&x&&(E.returnedStale=!0)),I?_.__staleWhileFetching:_.__returned=_}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=a(this,qt);if(!r)throw new Error("no memoMethod provided to constructor");const{context:o,forceRefresh:s,...i}=n,l=this.get(e,i);if(!s&&l!==void 0)return l;const c=r(e,l,{options:i,context:o});return this.set(e,c,i),c}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:i}=n,l=a(this,W).get(e);if(l!==void 0){const c=a(this,R)[l],u=m(this,p,z).call(this,c);return i&&a(this,Et).call(this,i,l),a(this,Q).call(this,l)?(i&&(i.get="stale"),u?(i&&r&&c.__staleWhileFetching!==void 0&&(i.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||m(this,p,Lt).call(this,e,"expire"),i&&r&&(i.returnedStale=!0),r?c:void 0)):(i&&(i.get="hit"),u?c.__staleWhileFetching:(m(this,p,te).call(this,l),o&&a(this,Bt).call(this,l),c))}else i&&(i.get="miss")}delete(e){return m(this,p,Lt).call(this,e,"delete")}clear(){return m(this,p,De).call(this,"delete")}};ot=new WeakMap,Z=new WeakMap,st=new WeakMap,Nt=new WeakMap,it=new WeakMap,Vt=new WeakMap,qt=new WeakMap,U=new WeakMap,at=new WeakMap,W=new WeakMap,F=new WeakMap,R=new WeakMap,q=new WeakMap,K=new WeakMap,V=new WeakMap,k=new WeakMap,ct=new WeakMap,X=new WeakMap,lt=new WeakMap,ut=new WeakMap,J=new WeakMap,ht=new WeakMap,vt=new WeakMap,Y=new WeakMap,Yt=new WeakMap,p=new WeakSet,Me=function(){const e=new pe(a(this,ot)),n=new pe(a(this,ot));T(this,J,e),T(this,ut,n),T(this,ie,(s,i,l=$t.now())=>{if(n[s]=i!==0?l:0,e[s]=i,i!==0&&this.ttlAutopurge){const c=setTimeout(()=>{a(this,Q).call(this,s)&&m(this,p,Lt).call(this,a(this,F)[s],"expire")},i+1);c.unref&&c.unref()}}),T(this,Bt,s=>{n[s]=e[s]!==0?$t.now():0}),T(this,Et,(s,i)=>{if(e[i]){const l=e[i],c=n[i];if(!l||!c)return;s.ttl=l,s.start=c,s.now=r||o();const u=s.now-c;s.remainingTTL=l-u}});let r=0;const o=()=>{const s=$t.now();if(this.ttlResolution>0){r=s;const i=setTimeout(()=>r=0,this.ttlResolution);i.unref&&i.unref()}return s};this.getRemainingTTL=s=>{const i=a(this,W).get(s);if(i===void 0)return 0;const l=e[i],c=n[i];if(!l||!c)return 1/0;const u=(r||o())-c;return l-u},T(this,Q,s=>{const i=n[s],l=e[s];return!!l&&!!i&&(r||o())-i>l})},Bt=new WeakMap,Et=new WeakMap,ie=new WeakMap,Q=new WeakMap,Tn=function(){const e=new pe(a(this,ot));T(this,at,0),T(this,lt,e),T(this,Gt,n=>{T(this,at,a(this,at)-e[n]),e[n]=0}),T(this,ae,(n,r,o,s)=>{if(m(this,p,z).call(this,r))return 0;if(!At(o))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(o=s(r,n),!At(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return o}),T(this,Zt,(n,r,o)=>{if(e[n]=r,a(this,Z)){const s=a(this,Z)-e[n];for(;a(this,at)>s;)m(this,p,ge).call(this,!0)}T(this,at,a(this,at)+e[n]),o&&(o.entrySize=r,o.totalCalculatedSize=a(this,at))})},Gt=new WeakMap,Zt=new WeakMap,ae=new WeakMap,Rt=function*({allowStale:e=this.allowStale}={}){if(a(this,U))for(let n=a(this,k);!(!m(this,p,ze).call(this,n)||((e||!a(this,Q).call(this,n))&&(yield n),n===a(this,V)));)n=a(this,K)[n]},Ct=function*({allowStale:e=this.allowStale}={}){if(a(this,U))for(let n=a(this,V);!(!m(this,p,ze).call(this,n)||((e||!a(this,Q).call(this,n))&&(yield n),n===a(this,k)));)n=a(this,q)[n]},ze=function(e){return e!==void 0&&a(this,W).get(a(this,F)[e])===e},ge=function(e){var s,i;const n=a(this,V),r=a(this,F)[n],o=a(this,R)[n];return a(this,vt)&&m(this,p,z).call(this,o)?o.__abortController.abort(new Error("evicted")):(a(this,ht)||a(this,Y))&&(a(this,ht)&&((s=a(this,st))==null||s.call(this,o,r,"evict")),a(this,Y)&&((i=a(this,X))==null||i.push([o,r,"evict"]))),a(this,Gt).call(this,n),e&&(a(this,F)[n]=void 0,a(this,R)[n]=void 0,a(this,ct).push(n)),a(this,U)===1?(T(this,V,T(this,k,0)),a(this,ct).length=0):T(this,V,a(this,q)[n]),a(this,W).delete(r),fe(this,U)._--,n},ye=function(e,n,r,o){const s=n===void 0?void 0:a(this,R)[n];if(m(this,p,z).call(this,s))return s;const i=new be,{signal:l}=r;l==null||l.addEventListener("abort",()=>i.abort(l.reason),{signal:i.signal});const c={signal:i.signal,options:r,context:o},u=(O,y=!1)=>{const{aborted:E}=i.signal,L=r.ignoreFetchAbort&&O!==void 0;if(r.status&&(E&&!y?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,L&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),E&&!L&&!y)return f(i.signal.reason);const d=S;return a(this,R)[n]===S&&(O===void 0?d.__staleWhileFetching?a(this,R)[n]=d.__staleWhileFetching:m(this,p,Lt).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,O,c.options))),O},h=O=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=O),f(O)),f=O=>{const{aborted:y}=i.signal,E=y&&r.allowStaleOnFetchAbort,L=E||r.allowStaleOnFetchRejection,d=L||r.noDeleteOnFetchRejection,w=S;if(a(this,R)[n]===S&&(!d||w.__staleWhileFetching===void 0?m(this,p,Lt).call(this,e,"fetch"):E||(a(this,R)[n]=w.__staleWhileFetching)),L)return r.status&&w.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),w.__staleWhileFetching;if(w.__returned===w)throw O},g=(O,y)=>{var L;const E=(L=a(this,Vt))==null?void 0:L.call(this,e,s,c);E&&E instanceof Promise&&E.then(d=>O(d===void 0?void 0:d),y),i.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(O(void 0),r.allowStaleOnFetchAbort&&(O=d=>u(d,!0)))})};r.status&&(r.status.fetchDispatched=!0);const S=new Promise(g).then(u,h),b=Object.assign(S,{__abortController:i,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,b,{...c.options,status:void 0}),n=a(this,W).get(e)):a(this,R)[n]=b,b},z=function(e){if(!a(this,vt))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof be},Fe=function(e,n){a(this,K)[n]=e,a(this,q)[e]=n},te=function(e){e!==a(this,k)&&(e===a(this,V)?T(this,V,a(this,q)[e]):m(this,p,Fe).call(this,a(this,K)[e],a(this,q)[e]),m(this,p,Fe).call(this,a(this,k),e),T(this,k,e))},Lt=function(e,n){var o,s,i,l;let r=!1;if(a(this,U)!==0){const c=a(this,W).get(e);if(c!==void 0)if(r=!0,a(this,U)===1)m(this,p,De).call(this,n);else{a(this,Gt).call(this,c);const u=a(this,R)[c];if(m(this,p,z).call(this,u)?u.__abortController.abort(new Error("deleted")):(a(this,ht)||a(this,Y))&&(a(this,ht)&&((o=a(this,st))==null||o.call(this,u,e,n)),a(this,Y)&&((s=a(this,X))==null||s.push([u,e,n]))),a(this,W).delete(e),a(this,F)[c]=void 0,a(this,R)[c]=void 0,c===a(this,k))T(this,k,a(this,K)[c]);else if(c===a(this,V))T(this,V,a(this,q)[c]);else{const h=a(this,K)[c];a(this,q)[h]=a(this,q)[c];const f=a(this,q)[c];a(this,K)[f]=a(this,K)[c]}fe(this,U)._--,a(this,ct).push(c)}}if(a(this,Y)&&((i=a(this,X))!=null&&i.length)){const c=a(this,X);let u;for(;u=c==null?void 0:c.shift();)(l=a(this,it))==null||l.call(this,...u)}return r},De=function(e){var n,r,o;for(const s of m(this,p,Ct).call(this,{allowStale:!0})){const i=a(this,R)[s];if(m(this,p,z).call(this,i))i.__abortController.abort(new Error("deleted"));else{const l=a(this,F)[s];a(this,ht)&&((n=a(this,st))==null||n.call(this,i,l,e)),a(this,Y)&&((r=a(this,X))==null||r.push([i,l,e]))}}if(a(this,W).clear(),a(this,R).fill(void 0),a(this,F).fill(void 0),a(this,J)&&a(this,ut)&&(a(this,J).fill(0),a(this,ut).fill(0)),a(this,lt)&&a(this,lt).fill(0),T(this,V,0),T(this,k,0),a(this,ct).length=0,T(this,at,0),T(this,U,0),a(this,Y)&&a(this,X)){const s=a(this,X);let i;for(;i=s==null?void 0:s.shift();)(o=a(this,it))==null||o.call(this,...i)}};let Pe=Ue;const hr=1500;let ee=null;const fr=()=>{var e;const t=(e=et())==null?void 0:e.contentWindow;return!ee||!t||!(ee instanceof t.HTMLElement)?null:ee},dr=()=>"userActivation"in window.navigator?window.navigator.userActivation.isActive:!0,tn=(t,e)=>{var n,r;try{const o=new URL(e,t.href);if(o.hostname!==t.hostname||o.protocol!==t.protocol)return(r=(n=$()).openExternal)==null||r.call(n,{href:o.href}),!0}catch{return}},pr=({doc:t})=>{const e=t.contentWindow;if(!e)return;let n;const r=c=>{var g,S,b;if(!c.isTrusted||((S=(g=$()).sendInstrument)==null||S.call(g,{type:"interaction",label:"click"}),!(c instanceof e.MouseEvent)))return;const u=c.target;if(!(u instanceof e.HTMLElement))return;const h=(b=u.closest("a"))==null?void 0:b.getAttribute("href");if(!h)return;const{location:f}=e;tn(f,h)&&c.preventDefault()},o=()=>{var u,h;const c=e.getSelection();!c||c.toString().trim().length===0||(h=(u=$()).sendInstrument)==null||h.call(u,{type:"interaction",label:"copy"})},s=()=>{var c,u;n||(n=e.setTimeout(()=>{n=void 0},hr),(u=(c=$()).sendInstrument)==null||u.call(c,{type:"interaction",label:"scroll"}))},i=c=>{var u,h;ee=c.target,c.key==="Escape"&&((h=(u=$()).notifyEscapeKey)==null||h.call(u))},l=c=>{ee=c.target};e.addEventListener("pointerdown",l,{passive:!0}),e.addEventListener("keydown",i,{passive:!0}),e.addEventListener("click",r,{capture:!0}),e.addEventListener("copy",o,{passive:!0}),e.addEventListener("scroll",s,{passive:!0}),e.document.addEventListener("scroll",s,{capture:!0,passive:!0}),e.open=c=>{if(!c)return null;const{location:u}=e;return tn(u,c),null}},Kt=new URLSearchParams(window.location.search);Kt.get("isStorybook");const rs=Kt.get("sessionId")??"",me=Kt.get("app")??"",gr=Kt.get("deviceType")==="mobile",Ge=gr&&me==="skybridge",xe=Kt.get("locale")??"",yr=Kt.get("unsafeSkipTargetOriginCheck")==="true",On="mobileSkybridge";Ge&&document.documentElement.classList.add(On);let Ne=null;const mr=new Set(["requestDisplayMode","sendFollowUpMessage","openExternal","requestPrompt"]),br=t=>{Ne=t},$=()=>we({includePrivate:!0}),en=(t,e,n)=>{var r,o,s;if(!Ge&&t==="requestPrompt"){const i=(r=fr())==null?void 0:r.getBoundingClientRect();return(o=e.openPromptInput)==null?void 0:o.call(e,{...n[0],clientX:(i==null?void 0:i.left)??0,clientY:(i==null?void 0:i.top)??0})}return(s=e[t])==null?void 0:s.call(e,...n)},we=({includePrivate:t=!1}={})=>{if(!Ne)throw new Error("Host API not published");return new Proxy(Ne,{get(e,n){if(!(n in e))return console.warn(`Host API property ${String(n)} not found`);const r=n;if(!(!t&&Qn.has(r)))return mr.has(r)?(...o)=>dr()?en(r,e,o):console.warn(`Method ${String(r)} called without synchronous user event`):typeof e[r]=="function"?(...o)=>en(r,e,o):e[r]}})},nn=new Pe({max:100,ttl:60*5e3}),wr=["sediment://","file-service://"],Er="/blank.svg",_r=({doc:t})=>{const e=t.contentWindow;if(!e)return;const n=Object.getOwnPropertyDescriptor(e.HTMLImageElement.prototype,"src");n&&Object.defineProperty(e.HTMLImageElement.prototype,"src",{set(r){var o,s,i,l,c;if(typeof r=="string"&&wr.some(u=>r.startsWith(u))){const u=nn.get(r);if(u){(o=n.set)==null||o.call(this,u);return}(s=n.set)==null||s.call(this,Er),(l=(i=$()).getDownloadURL)==null||l.call(i,r).then(h=>{var f;nn.set(r,h),(f=n.set)==null||f.call(this,h)}).catch(()=>{var h;(h=n.set)==null||h.call(this,"")})}else(c=n.set)==null||c.call(this,r)},get:n.get,configurable:!0,enumerable:!0})},Sr=({doc:t})=>{const e=t.contentWindow;!e||!("console"in e)||e.addEventListener("pointerdown",n=>{for(const r of n.composedPath())r instanceof e.HTMLElement&&r.dataset.instrument&&$().sendInstrument({type:"count",label:`clicked.${r.dataset.instrument}`})},{passive:!0,capture:!0})},rn=t=>{const e=t.trim().match(/(\d+):(\d+)\)?$/),n=parseInt((e==null?void 0:e.at(1))??""),r=parseInt((e==null?void 0:e.at(2))??"");return{lineno:n,colno:r}},on=(t,e)=>{var o;const n=[],r=t.split(`
`).slice(1)??[];for(let s=0;s<r.length;s++){const i=r[s],l=e(i);if(!l)break;const{source:c,line:u,column:h}=l;if(!(u==null||h==null))if(c!=null&&c.startsWith("internal")){const f=(o=e(r[s+1]))==null?void 0:o.name;f?n.push({line:u,column:h,formatted:`	at ${f} (module:${u}:${h})`}):n.push({line:u,column:h,formatted:i.replace(/(\(blob:.*\))$/,`(module:${u}:${h})`)})}else break}return n},Tr=({doc:t,sandboxLogger:e,onMessage:n,transformPosition:r})=>{const o=t.contentWindow;if(!o||!("console"in o))return;const s=c=>{if(!c)return null;const{lineno:u,colno:h}=rn(c);return(r==null?void 0:r({line:u,column:h}))??null};o.addEventListener("unhandledrejection",({reason:c})=>{var u,h;if(typeof c=="object"&&"stack"in c){const f=on(c.stack,s);n({type:pt.ERROR,line:((u=f[0])==null?void 0:u.line)??null,error:{line:((h=f[0])==null?void 0:h.line)??null,message:String(c.message??""),name:c.name??"Error",stack:f.map(({formatted:g})=>g)}})}}),o.addEventListener("error",({lineno:c,colno:u,error:h,message:f})=>{var O;const g=((O=r==null?void 0:r({line:c,column:u}))==null?void 0:O.line)??null;let S="",b=[];h&&typeof h=="object"&&"name"in h&&"stack"in h&&(S=h.name,b=on(h.stack,s).map(({formatted:y})=>y)),(S||f)&&n({type:pt.ERROR,error:{line:g,message:f,name:S||"Error",stack:b},line:g})},{passive:!0,capture:!0});const i=o.console,l=(c,u)=>(h,...f)=>{var b,O;c(h,...f);let g;if(h&&typeof h=="object"&&"stack"in h&&typeof h.stack=="string"){const y=(b=h.stack)==null?void 0:b.split(`
`);g=(y==null?void 0:y[1])??(y==null?void 0:y[0])}else{const L=(new Error().stack??"").split(`
`);g=L[2]||L[1]}let S=null;if(g){const{lineno:y,colno:E}=rn(g);S=((O=r==null?void 0:r({line:y,column:E}))==null?void 0:O.line)??null}try{u({line:S,error:h instanceof Error?h:null,args:h instanceof Error?f:[h,...f]})}catch(y){e.error("Failed to log",y)}};i.error=l(i.error,({line:c,args:u,error:h})=>{n({type:pt.ERROR,line:c,error:h?{line:c,message:h.message,name:h.name,stack:[]}:{line:c,message:String(u[0]??""),name:"Error",stack:[]}}),u.length&&n({type:pt.LOG,level:"info",line:c,log:u})}),i.log=l(i.log,({line:c,args:u})=>{n({type:pt.LOG,level:"info",line:c,log:u})})},Or=({doc:t})=>{t.contentWindow&&t.contentWindow.addEventListener("securitypolicyviolation",e=>{const n={effectiveDirective:e.effectiveDirective,violatedDirective:e.violatedDirective,blockedURI:e.blockedURI,sourceFile:e.sourceFile};$().notifySecurityPolicyViolation(n)})};function Ar(t){let e=!1;const n=[],r=[];function o(c){n.length>0?n.shift()(c):r.push(c)}function s(c){e||o({value:c,done:!1})}function i(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(o(Promise.reject(c)),i())}try{t(s,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{r.length>0?c(r.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}const kt=({root:t=et(),additionalGlobals:e,sandboxLogger:n,isInit:r=!1})=>{var o,s,i;if(t!=null&&t.contentWindow){if(r){t.contentWindow.oai=e,t.contentWindow.openai=e,t.contentWindow.webplus=e;return}(o=t.contentWindow).oai??(o.oai={}),(s=t.contentWindow).openai??(s.openai={}),(i=t.contentWindow).webplus??(i.webplus={});for(const[l,c]of Object.entries(e))try{t.contentWindow.oai[l]=c,t.contentWindow.openai[l]=c,t.contentWindow.webplus[l]=c}catch(u){n.environmentError(u)}Rr(t.contentWindow,e)}},Rr=(t,e)=>{t.dispatchEvent(new er(e)),t.dispatchEvent(new tr(e))},Cr=t=>t?t<0?"pop":"push":"update",An=({doc:t})=>{const e=t.contentWindow;if(!e)return;const{history:n}=e;let r=[],o=[],s=-1,i=0,l=null;const c=()=>e.location.hash??"",u=_=>{if(!_)return"";try{return new URL(_,e.location.href).hash??""}catch{return""}},h=()=>(i+=1,i),f=()=>{if(r.length===0){r=[h()],o=[c()],s=0;return}o.length===0&&(o=[c()])},g=_=>{var C,I;!r.length||s<0||(I=(C=$()).notifyNavigation)==null||I.call(C,{type:_,canGoBack:s>0,canGoForward:s<r.length-1})},S=(_,C=c())=>{f(),s<r.length-1&&(r=r.slice(0,s+1),o=o.slice(0,s+1)),r=[...r,h()],o=[...o,C],s=r.length-1,l=null,g(_)},b=(_=c())=>{f(),s>=0&&(r[s]=h(),o[s]=_),l=null,g("replace")},O=_=>{if(f(),!r.length)return;const C=typeof _=="number"&&Number.isFinite(_)?Math.trunc(_):0;C!==0&&(s=Math.min(r.length-1,Math.max(0,s+C))),l=null,g(Cr(C))},y=()=>{O(l??-1)},E=_=>{const C=c();if(l!=null){O(l);return}f();const I=u(_==null?void 0:_.oldURL),G=o.lastIndexOf(C);if(G!==-1&&G!==s){O(G-s);return}if(G===s){g("update");return}if(I&&o[s]===I){b(C);return}S("push",C)},L=n.pushState.bind(n);n.pushState=function(..._){const C=L(..._);return S("push"),C};const d=n.replaceState.bind(n);n.replaceState=function(..._){const C=d(..._);return b(),C};const w=n.back.bind(n);n.back=function(..._){return l=-1,w(..._)};const P=n.forward.bind(n);n.forward=function(..._){return l=1,P(..._)};const x=n.go.bind(n);n.go=function(..._){const[C=0]=_,I=typeof C=="number"&&Number.isFinite(C)?Math.trunc(C):Number.parseInt(String(C),10);return l=Number.isFinite(I)?I:null,x(..._)},n.popToRoot=function(){f();const _=-s;if(_===0){l=null;return}return l=_,x(_)},e.addEventListener("popstate",y),e.addEventListener("hashchange",E),f(),g("replace")},Lr={go:t=>{var e,n;(n=(e=et())==null?void 0:e.contentWindow)==null||n.history.go(t)},popToRoot:()=>{var t,e,n,r;(r=(n=(e=(t=et())==null?void 0:t.contentWindow)==null?void 0:e.history).popToRoot)==null||r.call(n)}},vr=Object.freeze(Object.defineProperty({__proto__:null,navigation:Lr,useNavigation:An},Symbol.toStringTag,{value:"Module"})),Rn=({doc:t=et(),safeArea:e})=>{var c;const n=(c=t==null?void 0:t.contentDocument)==null?void 0:c.documentElement;if(!n)return;const{insets:r}=e,{top:o,bottom:s,left:i,right:l}=r;n.style.setProperty("--safe-area-inset-top",`${o}px`),n.style.setProperty("--safe-area-inset-bottom",`${s}px`),n.style.setProperty("--safe-area-inset-left",`${i}px`),n.style.setProperty("--safe-area-inset-right",`${l}px`)},Cn=({theme:t,doc:e=et()})=>{var r;const n=(r=e==null?void 0:e.contentDocument)==null?void 0:r.documentElement;n&&(n.dataset.theme=t,n.classList.remove("light","dark"),n.classList.add(t))},Ir="html,body,#root{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}html,body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Helvetica Neue,Arial,sans-serif!important}button,input,textarea,select{font-family:inherit}html{background-color:#fff}html.dark{background-color:#212121}html.mobileSkybridge.dark{background-color:#000}@supports (font: -apple-system-body){html.mobileSkybridge{font:-apple-system-body}}",Pr=t=>{try{const e=t.createElement("style");e.textContent=Ir.trim(),t.head.appendChild(e),Ge&&t.documentElement.classList.add(On)}catch{}};async function*je({sandboxLogger:t,features:e,html:n,theme:r,safeArea:o,transformPosition:s,additionalGlobals:i,expectReadySignal:l}){let c=null,u=null;yield*Ar((h,f)=>{const g=y=>{h(y),y.type===pt.RUN_COMPLETE&&f()};t.time("html.evaluation");const S=et(),b=rr(e),O=()=>{if(!b.contentDocument||!b.contentWindow)return;const y=b.contentDocument;(i||o)&&kt({root:b,additionalGlobals:Object.assign(i??{},{safeArea:o}),sandboxLogger:t,isInit:!0}),y.open(),pr({doc:b}),An({doc:b}),Or({doc:b}),Sr({doc:b}),Tr({doc:b,sandboxLogger:t,transformPosition:s,onMessage:g}),_r({doc:b});let E=null,L=null;const d=()=>{S==null||S.remove(),t.timeEnd("html.evaluation"),g({type:pt.ENVIRONMENT_STATUS,status:bn.RUNNING_CODE})},w=()=>{c==null||c.disconnect(),u==null||u.disconnect(),g({type:pt.RUN_COMPLETE,duration:null,wasCancelled:!1,wasFatalError:!0})},P=()=>{var I,G;const C=lr(y);C&&C!==L&&((G=(I=$()).notifyIntrinsicHeight)==null||G.call(I,C),L=C)},x=()=>{var I,G;const C=ar(y);C!=null&&C!==E&&((G=(I=$()).notifyBackgroundColor)==null||G.call(I,C),E=C)};y.write(n);const _=y.documentElement;Pr(y),u=new ResizeObserver(()=>{P()}),c=new MutationObserver(C=>{for(const I of C)if(I.target===_){if(I.attributeName==="data-ready"&&_.hasAttribute("data-ready")){d();break}else if(I.attributeName==="data-fatal"&&_.hasAttribute("data-fatal")){w();break}}else if(I.addedNodes.length===0&&I.removedNodes.length>0&&I.target.parentElement===y.body&&I.target.childNodes.length===0&&Array.from(y.body.childNodes).every(G=>G===I.target||Mr(G))){w();break}x(),P()}),xe&&(_.lang=xe),r&&Cn({theme:r,doc:b}),o&&Rn({doc:b,safeArea:o}),u.observe(_,{box:"border-box"}),c.observe(_,{childList:!0,attributes:!0,subtree:!0}),y.close(),l||d(),_.hasAttribute("data-ready")&&d()};if(b.addEventListener("load",O,{once:!0}),b.src="about:blank",b.parentElement){const y=new MutationObserver(()=>{b.isConnected||(y==null||y.disconnect(),u==null||u.disconnect(),c==null||c.disconnect(),g({type:pt.RUN_COMPLETE,duration:null,wasCancelled:!1,wasFatalError:!1}))});y.observe(b.parentElement,{childList:!0,attributes:!0,subtree:!0})}})}function Mr(t){var e;return t.nodeType===Node.COMMENT_NODE?!0:t.nodeType===Node.TEXT_NODE?!((e=t.textContent)!=null&&e.trim()):t.nodeType===Node.ELEMENT_NODE?t.childNodes.length===0:!0}const os=Object.freeze(Object.defineProperty({__proto__:null,runHTMLAsync:je},Symbol.toStringTag,{value:"Module"})),Ln=({widgetId:t,globals:e,sandboxLogger:n})=>{const{toolInput:r,toolOutput:o,toolResponseMetadata:s,widgetState:i,subjectId:l=null}=e;let c=i;return{toolInput:r,toolOutput:o,toolResponseMetadata:s,widgetState:i,subjectId:l,setWidgetState:u=>{var f,g;const h=typeof u=="function"?u(c):u;return c=h,kt({additionalGlobals:{widgetState:h},sandboxLogger:n}),(g=(f=$())==null?void 0:f.updateWidgetState)==null?void 0:g.call(f,t,h)}}};async function*zr(t,{html:e,widgetId:n,widgetState:r,viewParams:o,maxHeight:s,toolInput:i,toolOutput:l,toolResponseMetadata:c,subjectId:u=null,displayMode:h,theme:f,userAgent:g,safeArea:S,features:b,csp:O}){try{Jn(O)}catch(E){throw t.error("Failed to apply CSP",E),E}let y;try{y=we({includePrivate:!1}),y.displayMode=h,y.maxHeight=s,y.theme=f,y.locale=xe,y.userAgent=g,y.view={params:o??null,mode:h},y.widget={state:r,props:l,setState:E=>{var L,d;return console.warn("window.openai.widget is deprecated. It will be removed in future versions"),(d=(L=we({includePrivate:!0}))==null?void 0:L.updateWidgetState)==null?void 0:d.call(L,n,E)}},Object.assign(y,Ln({widgetId:n,globals:{toolInput:i,toolOutput:l,toolResponseMetadata:c,widgetState:r,subjectId:u},sandboxLogger:t}))}catch{}yield*je({sandboxLogger:t,html:e,theme:f,features:b,additionalGlobals:y,safeArea:S,transformPosition:null,expectReadySignal:!1})}function Fr(t,e="<unknown>"){if(t==null)throw new Error(`${e}: unexpected nullish value: ${JSON.stringify(t)}`);return t}var M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Be={},ce={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.cast=xr;le.get=Nr;le.set=Br;const Dr=2**32;function xr(t){return t<0?t+Dr:t}function Nr(t,e){return t>>e&255}function Br(t,e,n){return t^(t^n<<e)&255<<e}(function(t){var e=M&&M.__createBinding||(Object.create?function(d,w,P,x){x===void 0&&(x=P);var _=Object.getOwnPropertyDescriptor(w,P);(!_||("get"in _?!w.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return w[P]}}),Object.defineProperty(d,x,_)}:function(d,w,P,x){x===void 0&&(x=P),d[x]=w[P]}),n=M&&M.__setModuleDefault||(Object.create?function(d,w){Object.defineProperty(d,"default",{enumerable:!0,value:w})}:function(d,w){d.default=w}),r=M&&M.__importStar||function(d){if(d&&d.__esModule)return d;var w={};if(d!=null)for(var P in d)P!=="default"&&Object.prototype.hasOwnProperty.call(d,P)&&e(w,d,P);return n(w,d),w};Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_A=t.OFFSET_B=t.OFFSET_G=t.OFFSET_R=void 0,t.newColor=c,t.from=u,t.toNumber=h,t.getRed=f,t.getGreen=g,t.getBlue=S,t.getAlpha=b,t.setRed=O,t.setGreen=y,t.setBlue=E,t.setAlpha=L;const o=r(le),{cast:s,get:i,set:l}=o;t.OFFSET_R=24,t.OFFSET_G=16,t.OFFSET_B=8,t.OFFSET_A=0;function c(d,w,P,x){return(d<<t.OFFSET_R)+(w<<t.OFFSET_G)+(P<<t.OFFSET_B)+(x<<t.OFFSET_A)}function u(d){return c(i(d,t.OFFSET_R),i(d,t.OFFSET_G),i(d,t.OFFSET_B),i(d,t.OFFSET_A))}function h(d){return s(d)}function f(d){return i(d,t.OFFSET_R)}function g(d){return i(d,t.OFFSET_G)}function S(d){return i(d,t.OFFSET_B)}function b(d){return i(d,t.OFFSET_A)}function O(d,w){return l(d,t.OFFSET_R,w)}function y(d,w){return l(d,t.OFFSET_G,w)}function E(d,w){return l(d,t.OFFSET_B,w)}function L(d,w){return l(d,t.OFFSET_A,w)}})(ce);var ue={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.labToXyzd50=Yr;D.xyzd50ToLab=Zr;D.oklabToXyzd65=Mn;D.xyzd65ToOklab=zn;D.lchToLab=Fn;D.labToLch=Dn;D.displayP3ToXyzd50=Kr;D.xyzd50ToDisplayP3=Jr;D.proPhotoToXyzd50=Qr;D.xyzd50ToProPhoto=to;D.adobeRGBToXyzd50=eo;D.xyzd50ToAdobeRGB=no;D.rec2020ToXyzd50=ro;D.xyzd50ToRec2020=oo;D.xyzd50ToD65=xn;D.xyzd65ToD50=Nn;D.xyzd65TosRGBLinear=so;D.xyzd50TosRGBLinear=io;D.srgbLinearToXyzd50=ao;D.srgbToXyzd50=co;D.xyzd50ToSrgb=lo;D.oklchToXyzd50=uo;D.xyzd50ToOklch=ho;const vn=.9642,In=1,Pn=.8251;function H(t,e){const n=[0,0,0];for(let r=0;r<3;++r)n[r]=t[r][0]*e[0]+t[r][1]*e[1]+t[r][2]*e[2];return n}class _t{constructor(e,n,r=0,o=0,s=0,i=0,l=0){A(this,"g");A(this,"a");A(this,"b");A(this,"c");A(this,"d");A(this,"e");A(this,"f");this.g=e,this.a=n,this.b=r,this.c=o,this.d=s,this.e=i,this.f=l}eval(e){const n=e<0?-1:1,r=e*n;return r<this.d?n*(this.c*r+this.f):n*(Math.pow(this.a*r+this.b,this.g)+this.e)}}const gt={sRGB:new _t(2.4,1/1.055,.055/1.055,1/12.92,.04045,0,0),sRGB_INVERSE:new _t(.416667,1.13728,-0,12.92,.0031308,-.0549698,-0),proPhotoRGB:new _t(1.8,1),proPhotoRGB_INVERSE:new _t(.555556,1,-0,0,0,0,0),k2Dot2:new _t(2.2,1),k2Dot2_INVERSE:new _t(.454545,1),rec2020:new _t(2.22222,.909672,.0903276,.222222,.0812429,0,0),rec2020_INVERSE:new _t(.45,1.23439,-0,4.5,.018054,-.0993195,-0)},yt={sRGB:[[.436065674,.385147095,.143066406],[.222488403,.716873169,.06060791],[.013916016,.097076416,.714096069]],sRGB_INVERSE:[[3.134112151374599,-1.6173924597114966,-.4906334036481285],[-.9787872938826594,1.9162795854799963,.0334547139520088],[.07198304248352326,-.2289858493321844,1.4053851325241447]],displayP3:[[.515102,.291965,.157153],[.241182,.692236,.0665819],[-.00104941,.0418818,.784378]],displayP3_INVERSE:[[2.404045155982687,-.9898986932663839,-.3976317191366333],[-.8422283799266768,1.7988505115115485,.016048170293157416],[.04818705979712955,-.09737385156228891,1.2735066448052303]],adobeRGB:[[.60974,.20528,.14919],[.31111,.62567,.06322],[.01947,.06087,.74457]],adobeRGB_INVERSE:[[1.9625385510109137,-.6106892546501431,-.3413827467482388],[-.9787580455521,1.9161624707082339,.03341676594241408],[.028696263137883395,-.1406807819331586,1.349252109991369]],rec2020:[[.673459,.165661,.1251],[.279033,.675338,.0456288],[-.00193139,.0299794,.797162]],rec2020_INVERSE:[[1.647275201661012,-.3936024771460771,-.23598028884792507],[-.6826176165196962,1.647617775014935,.01281626807852422],[.029662725298529837,-.06291668721366285,1.2533964313435522]],xyz:[[1,0,0],[0,1,0],[0,0,1]]};function sn(t){return t*(Math.PI/180)}function Gr(t){return t*(180/Math.PI)}function mt(t,e,n,r){return[t.eval(e),t.eval(n),t.eval(r)]}const jr=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],Wr=[[.2104542553,.7936177849999999,-.0040720468],[1.9779984951000003,-2.4285922049999997,.4505937099000001],[.025904037099999982,.7827717662,-.8086757660000001]],$r=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],Ur=[[1.226879873374156,-.5578149965554814,.2813910501772159],[-.040575762624313734,1.1122868293970596,-.07171106666151703],[-.07637294974672144,-.4214933239627915,1.586924024427242]],Hr=[[.7976700747153241,.13519395152800417,.03135596341127167],[.28803902352472205,.7118744007923554,8661179538844252e-20],[2739876695467402e-22,-14405226518969991e-22,.825211112593861]],kr=[[1.3459533710138858,-.25561367037652133,-.051116041522131374],[-.544600415668951,1.5081687311475767,.020535163968720935],[-13975622054109725e-22,2717590904589903e-21,1.2118111696814942]],Xr=[[1.0478573189120088,.022907374491829943,-.050162247377152525],[.029570500050499514,.9904755577034089,-.017061518194840468],[-.00924047197558879,.015052921526981566,.7519708530777581]],Vr=[[.9555366447632887,-.02306009252137888,.06321844147263304],[-.028315378228764922,1.009951351591575,.021026001591792402],[.012308773293784308,-.02050053471777469,1.3301947294775631]],qr=[[3.2408089365140573,-1.5375788839307314,-.4985609572551541],[-.9692732213205414,1.876110235238969,.041560501141251774],[.05567030990267439,-.2040007921971802,1.0571046720577026]];function Yr(t,e,n){let r=(t+16)/116,o=r+e/500,s=r-n/200;function i(l){return l<=.20689655172413793?108/841*(l-16/116):l*l*l}return o=i(o)*vn,r=i(r)*In,s=i(s)*Pn,[o,r,s]}function Zr(t,e,n){function r(l){return l<=.008856451679035631?841/108*l+16/116:Math.pow(l,1/3)}t=r(t/vn),e=r(e/In),n=r(n/Pn);const o=116*e-16,s=500*(t-e),i=200*(e-n);return[o,s,i]}function Mn(t,e,n){const o=H(jr,[t,e,n]);return o[0]=o[0]*o[0]*o[0],o[1]=o[1]*o[1]*o[1],o[2]=o[2]*o[2]*o[2],H(Ur,o)}function zn(t,e,n){const o=H($r,[t,e,n]);o[0]=Math.pow(o[0],1/3),o[1]=Math.pow(o[1],1/3),o[2]=Math.pow(o[2],1/3);const s=H(Wr,o);return[s[0],s[1],s[2]]}function Fn(t,e,n){return n===void 0?[t,0,0]:[t,e*Math.cos(sn(n)),e*Math.sin(sn(n))]}function Dn(t,e,n){return[t,Math.sqrt(e*e+n*n),Gr(Math.atan2(n,e))]}function Kr(t,e,n){const[r,o,s]=mt(gt.sRGB,t,e,n),i=[r,o,s];return H(yt.displayP3,i)}function Jr(t,e,n){const r=[t,e,n],o=H(yt.displayP3_INVERSE,r);return mt(gt.sRGB_INVERSE,o[0],o[1],o[2])}function Qr(t,e,n){const[r,o,s]=mt(gt.proPhotoRGB,t,e,n);return H(Hr,[r,o,s])}function to(t,e,n){const o=H(kr,[t,e,n]);return mt(gt.proPhotoRGB_INVERSE,o[0],o[1],o[2])}function eo(t,e,n){const[r,o,s]=mt(gt.k2Dot2,t,e,n),i=[r,o,s];return H(yt.adobeRGB,i)}function no(t,e,n){const r=[t,e,n],o=H(yt.adobeRGB_INVERSE,r);return mt(gt.k2Dot2_INVERSE,o[0],o[1],o[2])}function ro(t,e,n){const[r,o,s]=mt(gt.rec2020,t,e,n),i=[r,o,s];return H(yt.rec2020,i)}function oo(t,e,n){const r=[t,e,n],o=H(yt.rec2020_INVERSE,r);return mt(gt.rec2020_INVERSE,o[0],o[1],o[2])}function xn(t,e,n){return H(Vr,[t,e,n])}function Nn(t,e,n){return H(Xr,[t,e,n])}function so(t,e,n){return H(qr,[t,e,n])}function io(t,e,n){const r=[t,e,n];return H(yt.sRGB_INVERSE,r)}function ao(t,e,n){const r=[t,e,n];return H(yt.sRGB,r)}function co(t,e,n){const[r,o,s]=mt(gt.sRGB,t,e,n),i=[r,o,s];return H(yt.sRGB,i)}function lo(t,e,n){const r=[t,e,n],o=H(yt.sRGB_INVERSE,r);return mt(gt.sRGB_INVERSE,o[0],o[1],o[2])}function uo(t,e,n){const[r,o,s]=Fn(t,e,n),[i,l,c]=Mn(r,o,s);return Nn(i,l,c)}function ho(t,e,n){const[r,o,s]=xn(t,e,n),[i,l,c]=zn(r,o,s);return Dn(i,l,c)}var fo=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),po=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),go=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&fo(e,t,n);return po(e,t),e};Object.defineProperty(ue,"__esModule",{value:!0});ue.parse=_o;ue.parseHex=Bn;ue.parseColor=Gn;const ne=ce,N=go(D),yo=35,Ee=37,mo=103,he=110,bo=100,wo=101,Eo=(()=>{const t="(\\w+)",e="[\\s,\\/]",n="([^\\s,\\/]+)",r=`(?:${e}+${n})`;return new RegExp(`${t}\\(
      ${e}*
      ${n}
      ${r}
      ${r}
      ${r}?
      ${r}?
      ${e}*
    \\)`.replace(/\s/g,""))})();function _o(t){return t.charCodeAt(0)===yo?Bn(t):Gn(t)}function Bn(t){let e=0,n=0,r=0,o=255;switch(t.length){case 4:{e=(j(t.charCodeAt(1))<<4)+j(t.charCodeAt(1)),n=(j(t.charCodeAt(2))<<4)+j(t.charCodeAt(2)),r=(j(t.charCodeAt(3))<<4)+j(t.charCodeAt(3));break}case 7:{e=(j(t.charCodeAt(1))<<4)+j(t.charCodeAt(2)),n=(j(t.charCodeAt(3))<<4)+j(t.charCodeAt(4)),r=(j(t.charCodeAt(5))<<4)+j(t.charCodeAt(6));break}case 9:{e=(j(t.charCodeAt(1))<<4)+j(t.charCodeAt(2)),n=(j(t.charCodeAt(3))<<4)+j(t.charCodeAt(4)),r=(j(t.charCodeAt(5))<<4)+j(t.charCodeAt(6)),o=(j(t.charCodeAt(7))<<4)+j(t.charCodeAt(8));break}}return(0,ne.newColor)(e,n,r,o)}function j(t){return(t&15)+9*(t>>6)}function Gn(t){const e=Eo.exec(t);if(e===null)throw new Error(`Color.parse(): invalid CSS color: "${t}"`);const n=e[1],r=e[2],o=e[3],s=e[4],i=e[5],l=e[6];switch(n){case"rgb":case"rgba":{const c=Oe(r),u=Oe(o),h=Oe(s),f=i?St(i):255;return(0,ne.newColor)(c,u,h,f)}case"hsl":case"hsla":{const c=Ae(r),u=de(o),h=de(s),f=i?St(i):255;let g,S,b;if(u===0)g=S=b=Math.round(h*255);else{const O=h<.5?h*(1+u):h+u-h*u,y=2*h-O;g=Math.round(Ht(y,O,c+1/3)*255),S=Math.round(Ht(y,O,c)*255),b=Math.round(Ht(y,O,c-1/3)*255)}return(0,ne.newColor)(g,S,b,f)}case"hwb":{const c=Ae(r),u=de(o),h=de(s),f=i?St(i):255,g=1,S=.5,b=S+g-S*g,O=2*S-b;let y=Math.round(Ht(O,b,c+1/3)*255),E=Math.round(Ht(O,b,c)*255),L=Math.round(Ht(O,b,c-1/3)*255);return y=Re(y,u,h),E=Re(E,u,h),L=Re(L,u,h),(0,ne.newColor)(y,E,L,f)}case"lab":{const c=Tt(r,100),u=Tt(o,125),h=Tt(s,125),f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.labToXyzd50(c,u,h)))}case"lch":{const c=Tt(r,100),u=Tt(o,150),h=Ae(s)*360,f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.labToXyzd50(...N.lchToLab(c,u,h))))}case"oklab":{const c=Tt(r,1),u=Tt(o,.4),h=Tt(s,.4),f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.xyzd65ToD50(...N.oklabToXyzd65(c,u,h))))}case"oklch":{const c=Ut(r),u=Ut(o),h=Ut(s),f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.oklchToXyzd50(c,u,h)))}case"color":{const c=r,u=Ut(o),h=Ut(s),f=Ut(i),g=l?St(l):255;switch(c){case"srgb":return tt(g,[u,h,f]);case"srgb-linear":return tt(g,N.xyzd50ToSrgb(...N.srgbLinearToXyzd50(u,h,f)));case"display-p3":return tt(g,N.xyzd50ToSrgb(...N.displayP3ToXyzd50(u,h,f)));case"a98-rgb":return tt(g,N.xyzd50ToSrgb(...N.adobeRGBToXyzd50(u,h,f)));case"prophoto-rgb":return tt(g,N.xyzd50ToSrgb(...N.proPhotoToXyzd50(u,h,f)));case"rec2020":return tt(g,N.xyzd50ToSrgb(...N.rec2020ToXyzd50(u,h,f)));case"xyz":case"xyz-d65":return tt(g,N.xyzd50ToSrgb(...N.xyzd65ToD50(u,h,f)));case"xyz-d50":return tt(g,N.xyzd50ToSrgb(u,h,f))}}}throw new Error(`Color.parse(): invalid CSS color: "${t}"`)}function Oe(t){return t.charCodeAt(t.length-1)===Ee?Math.round(parseFloat(t)/100*255):Math.round(parseFloat(t))}function St(t){return Math.round(So(t)*255)}function So(t){return t.charCodeAt(0)===he?0:t.charCodeAt(t.length-1)===Ee?parseFloat(t)/100:parseFloat(t)}function Ae(t){let e=1;switch(t.charCodeAt(t.length-1)){case wo:return 0;case bo:{t.charCodeAt(Math.max(0,t.length-4))===mo?e=400:e=2*Math.PI;break}case he:{e=1;break}default:e=360}return parseFloat(t)/e}function de(t){return t.charCodeAt(0)===he?0:parseFloat(t)/100}function Ut(t){return t.charCodeAt(0)===he?0:t.charCodeAt(t.length-1)===Ee?parseFloat(t)/100:parseFloat(t)}function Tt(t,e){return t.charCodeAt(0)===he?0:t.charCodeAt(t.length-1)===Ee?parseFloat(t)/100*e:parseFloat(t)}function Ht(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Re(t,e,n){let r=t/255;return r*=1-e-n,r+=e,Math.round(r*255)}function Ce(t){return Math.max(0,Math.min(255,t))}function tt(t,e){const n=Ce(Math.round(e[0]*255)),r=Ce(Math.round(e[1]*255)),o=Ce(Math.round(e[2]*255));return(0,ne.newColor)(n,r,o,t)}var nt={},To=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Oo=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ao=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&To(e,t,n);return Oo(e,t),e};Object.defineProperty(nt,"__esModule",{value:!0});nt.format=void 0;nt.formatHEXA=jn;nt.formatHEX=Co;nt.formatRGBA=Lo;nt.toRGBA=vo;nt.formatHSLA=Io;nt.toHSLA=Po;nt.formatHWBA=Mo;nt.toHWBA=zo;const Ro=Ao(ce),{getRed:It,getGreen:Pt,getBlue:Mt,getAlpha:jt}=Ro,B=[0,0,0],xt=Array.from({length:256}).map((t,e)=>e.toString(16).padStart(2,"0"));nt.format=jn;function jn(t){return"#"+xt[It(t)]+xt[Pt(t)]+xt[Mt(t)]+xt[jt(t)]}function Co(t){return"#"+xt[It(t)]+xt[Pt(t)]+xt[Mt(t)]}function Lo(t){return`rgba(${It(t)} ${Pt(t)} ${Mt(t)} / ${jt(t)/255})`}function vo(t){return{r:It(t),g:Pt(t),b:Mt(t),a:jt(t)}}function Io(t){Wn(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],o=jt(t)/255;return`hsla(${e} ${n}% ${r}% / ${o})`}function Po(t){Wn(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],o=jt(t)/255;return{h:e,s:n,l:r,a:o}}function Mo(t){$n(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],o=jt(t)/255;return`hsla(${e} ${n}% ${r}% / ${o})`}function zo(t){$n(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],o=jt(t)/255;return{h:e,w:n,b:r,a:o}}function Wn(t,e,n){t/=255,e/=255,n/=255;const r=Math.max(t,e,n),o=r-Math.min(t,e,n),s=o?r===t?(e-n)/o:r===e?2+(n-t)/o:4+(t-e)/o:0;B[0]=60*s<0?60*s+360:60*s,B[1]=100*(o?r<=.5?o/(2*r-o):o/(2-(2*r-o)):0),B[2]=100*(2*r-o)/2}function $n(t,e,n){t/=255,e/=255,n/=255;const r=Math.min(t,e,n),o=Math.max(t,e,n),s=1-o;if(o===r){B[0]=0,B[1]=r,B[2]=s;return}let i=t===r?e-n:e===r?n-t:t-e,l=t===r?3:e===r?5:1;B[0]=(l-i/(o-r))/6,B[1]=r,B[2]=s}var Wt={},Fo=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Do=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xo=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Fo(e,t,n);return Do(e,t),e};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.alpha=Go;Wt.darken=jo;Wt.lighten=Wo;Wt.blend=$o;Wt.getLuminance=Uo;const No=xo(ce),{getRed:re,getGreen:oe,getBlue:se,getAlpha:Un,setAlpha:Bo,newColor:We}=No;function Go(t,e){return Bo(t,Math.round(e*255))}function jo(t,e){const n=re(t),r=oe(t),o=se(t),s=Un(t),i=1-e;return We(n*i,r*i,o*i,s)}function Wo(t,e){const n=re(t),r=oe(t),o=se(t),s=Un(t);return We(n+(255-n)*e,r+(255-r)*e,o+(255-o)*e,s)}function $o(t,e,n,r=1){const o=(c,u)=>Math.round((c**(1/r)*(1-n)+u**(1/r)*n)**r),s=o(re(t),re(e)),i=o(oe(t),oe(e)),l=o(se(t),se(e));return We(s,i,l,255)}function Uo(t){const e=re(t)/255,n=oe(t)/255,r=se(t)/255,o=c=>c<=.03928?c/12.92:((c+.055)/1.055)**2.4,s=o(e),i=o(n),l=o(r);return Math.round((.2126*s+.7152*i+.0722*l)*1e3)/1e3}(function(t){var e=M&&M.__createBinding||(Object.create?function(r,o,s,i){i===void 0&&(i=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(r,i,l)}:function(r,o,s,i){i===void 0&&(i=s),r[i]=o[s]}),n=M&&M.__exportStar||function(r,o){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(ce,t),n(ue,t),n(nt,t),n(Wt,t)})(Be);function Ot(t,e=document.documentElement){var o;if((o=window.CSS)!=null&&o.number)return CSSNumericValue.parse(t).to("px").value;const n=document.createElement("div");n.style.all="initial",n.style.position="absolute",n.style.width=t,e.appendChild(n);const r=n.getBoundingClientRect().width;return e.removeChild(n),r}const wt=4,Ho=8;function an(t){const{borderWidth:e,borderRadius:n,backgroundColor:r,paddingLeft:o,paddingRight:s,paddingTop:i,paddingBottom:l}=getComputedStyle(t),c=t.getBoundingClientRect(),u=Be.getAlpha(Be.parse(r))===0,h=Ot(e)>0,f=Ot(n),g=f?f+wt:Ho;return u&&!h?{x:c.x+Ot(o)-wt,y:c.y+Ot(i)-wt,width:c.width-Ot(o)-Ot(s)+wt*2,height:c.height-Ot(i)-Ot(l)+wt*2,borderRadius:g}:{x:c.x-wt,y:c.y-wt,width:c.width+wt*2,height:c.height+wt*2,borderRadius:g}}const ko=t=>{var n,r,o;const e=(o=(r=(n=et())==null?void 0:n.contentDocument)==null?void 0:r.defaultView)==null?void 0:o.HTMLElement;return t instanceof HTMLElement||!!e&&t instanceof e},Xo=t=>{const{sourceName:e,sourcePos:n}=t.dataset;if(!e||!n)return null;const[r,o]=n.split("-"),[s,i]=r.split(":"),[l,c]=o.split(":");return{id:`${e}:${s}:${i}`,name:e,element:t,location:{start:{line:Number(s),col:Number(i)},end:{line:Number(l),col:Number(c)}}}};function cn(t){const e=t.composedPath();for(const n of e){if(!ko(n))continue;const r=Xo(n);if(r)return r}return null}class Vo{constructor(){A(this,"window");A(this,"selectedComponent",null);A(this,"hoveredComponent",null);A(this,"frame",null);A(this,"getBoundingBoxes",()=>{let e=null,n=[];if(this.hoveredComponent){const{element:r}=this.hoveredComponent;e={component:{id:this.hoveredComponent.id,name:this.hoveredComponent.name,location:this.hoveredComponent.location},rect:an(r)}}if(this.selectedComponent){const{element:r}=this.selectedComponent;n=[{component:{id:this.selectedComponent.id,name:this.selectedComponent.name,location:this.selectedComponent.location},rect:an(r)}]}return{hovered:e,selected:n}});A(this,"measure",()=>{this.frame=requestAnimationFrame(()=>{var e,n;(n=(e=$()).drawBoundingBoxes)==null||n.call(e,this.getBoundingBoxes())})});A(this,"handleMouseOver",e=>{const n=cn(e);this.hoveredComponent=n,this.measure()});A(this,"handlePointerDown",e=>{e.preventDefault(),e.stopPropagation()});A(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault();const n=cn(e);this.selectedComponent=n,this.measure()});A(this,"destroy",()=>{this.removeMouseListeners(),this.window.removeEventListener("scroll",this.measure,{capture:!0}),this.window.removeEventListener("resize",this.measure,{capture:!0}),this.frame!=null&&cancelAnimationFrame(this.frame)});A(this,"enable",()=>{this.removeMouseListeners(),this.window.addEventListener("mouseover",this.handleMouseOver,{passive:!0,capture:!0}),this.window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.addEventListener("click",this.handleClick,{capture:!0})});A(this,"disable",()=>{this.removeMouseListeners()});A(this,"removeMouseListeners",()=>{this.window.removeEventListener("mouseover",this.handleMouseOver,{capture:!0}),this.window.removeEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.removeEventListener("click",this.handleClick,{capture:!0})});var e;this.window=Fr((e=et())==null?void 0:e.contentWindow),this.window.addEventListener("scroll",this.measure,{capture:!0}),this.window.addEventListener("resize",this.measure,{capture:!0})}}const qo=(t,...e)=>{};class rt{constructor(){A(this,"pendingTimers",new Map)}log(e,...n){qo(e,...n)}error(e,n){console.error("[sandbox]",e,n),$().sendInstrument({type:"error",message:e,error:n})}environmentError(e){if(console.error("[sandbox]",e),e instanceof Error){const{name:r,message:o,stack:s}=e;$().notifyEnvironmentError({name:r,message:o,stack:s});return}const{stack:n}=new Error;try{$().notifyEnvironmentError({name:"Unknown environment error",message:JSON.stringify(e),stack:n})}catch{$().notifyEnvironmentError({name:"Unknown environment error",message:"Failed to stringify error",stack:n})}}count(e,n,r){$().sendInstrument({type:"count",label:e,tags:r,count:n})}time(e){this.pendingTimers.has(e),this.pendingTimers.set(e,performance.now())}timeEnd(e){if(!this.pendingTimers.has(e))return;const n=performance.now(),r=n-(this.pendingTimers.get(e)??n);this.pendingTimers.delete(e),$().sendInstrument({type:"hist",label:e,value:r})}}function Yo(t){const n=$e(t,new WeakMap);try{return structuredClone(n)}catch{}return n}function $e(t,e){if(t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t;if(typeof t=="symbol"||typeof t=="function"||typeof t>"u")return String(t);if(e.has(t))return e.get(t);try{return structuredClone(t)}catch{}const n=Object.prototype.toString.call(t);if(n==="[object Date]")return new Date(t.getTime());if(n==="[object RegExp]")return Zo(t);if(n==="[object ArrayBuffer]")return t.slice(0);if(n==="[object DataView]"){const o=t,s=$e(o.buffer,e);try{return new DataView(s,o.byteOffset,o.byteLength)}catch{return String(t)}}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))try{const o=t.constructor;if(typeof t.slice=="function")return t.slice();const s=new o(t.length);return s.set(t),s}catch{return String(t)}if(n==="[object Map]"){const o=new Map;e.set(t,o);for(const[s,i]of t)o.set(Ft(s,e),Ft(i,e));return o}if(n==="[object Set]"){const o=new Set;e.set(t,o);for(const s of t)o.add(Ft(s,e));return o}if(typeof Blob<"u"&&t instanceof Blob)try{return typeof File<"u"&&t instanceof File?new File([t],t.name,{type:t.type,lastModified:t.lastModified}):new Blob([t],{type:t.type})}catch{return String(t)}if(typeof URL<"u"&&t instanceof URL)try{return new URL(t.toString())}catch{return String(t)}if(typeof URLSearchParams<"u"&&t instanceof URLSearchParams)try{return new URLSearchParams(t.toString())}catch{return String(t)}if(t instanceof Error){const o=t;let s;try{const i=o.constructor;s=typeof i=="function"?new i(o.message):new Error(o.message)}catch{s=new Error(o.message)}if(s.name=o.name,typeof o.stack=="string"&&(s.stack=o.stack),"cause"in o)try{s.cause=Ft(o.cause,e)}catch{s.cause=String(o.cause)}for(const i of Object.keys(o))try{s[i]=Ft(o[i],e)}catch{s[i]=String(o[i])}return s}if(typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof WeakMap<"u"&&t instanceof WeakMap||typeof WeakSet<"u"&&t instanceof WeakSet)return String(t);if(Array.isArray(t)){const o=new Array(t.length);e.set(t,o);for(let s=0;s<t.length;s++)s in t&&(o[s]=Ft(t[s],e));return o}const r={};e.set(t,r);for(const o of Object.keys(t)){let s;try{s=t[o]}catch(i){s=String(i)}r[o]=Ft(s,e)}return r}function Ft(t,e){try{return structuredClone(t)}catch{}return $e(t,e)}function Zo(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}const ln="ABORT",un="CALL",hn="REJECT",Le="RESOLVE";function dt(t,e){const n=s=>{const i=s.data;if(Array.isArray(i)&&i[0]===un){s.stopImmediatePropagation();const[l]=s.ports;if(!l)throw new Error("RPCCallMessage must contains a port.");e?async function(){const c=new AbortController;try{l.onmessage=({data:u})=>Array.isArray(u)&&u[0]===ln&&c.abort(),l.postMessage([Le,await e.call({signal:c.signal},...i.slice(1))])}catch(u){if(u instanceof Error&&u.name==="DataCloneError")try{l.postMessage([Le,await e.call({signal:c.signal},...Yo(i.slice(1)))]);return}catch{}l.postMessage([hn,u])}finally{l.close()}}():(l.postMessage([hn,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),l.close())}};t.addEventListener("message",n),t.start();const r=s=>(...i)=>new Promise((l,c)=>{var f;const{port1:u,port2:h}=new MessageChannel;u.onmessage=g=>{const S=g.data;S[0]===Le?l(S[1]):c(S[1]),u.close()},(f=s==null?void 0:s.signal)==null||f.addEventListener("abort",()=>{u.postMessage([ln]),u.close(),c(new Error("Aborted."))}),t.postMessage([un,...i],[h,...s.transfer||[]])}),o=r({});return o.withOptions=r,o}const fn="GENERATOR_GENERATE";function dn(t,e){const n=s=>{const i=s.data;if(Array.isArray(i)&&i[0]===fn){if(s.stopImmediatePropagation(),!e)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[l,c,...u]=i,h=e(...u);dt(c.next,h.next.bind(h)),dt(c.return,f=>{var g;return((g=h.return)==null?void 0:g.call(h,f))||{done:!0}}),dt(c.throw,f=>{var g;return((g=h.throw)==null?void 0:g.call(h,f))||Promise.reject(f)}),dt(c.asyncDispose,async()=>{var S,b;const f=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),g=Symbol.dispose||Symbol.for("Symbol.dispose");f in h?await((S=h[f])==null?void 0:S.call(h)):g in h&&((b=h[g])==null||b.call(h))})}};t.addEventListener("message",n),t.start();const r=s=>{let i;return(...l)=>{var G;const{port1:c,port2:u}=new MessageChannel,{port1:h,port2:f}=new MessageChannel,{port1:g,port2:S}=new MessageChannel,{port1:b,port2:O}=new MessageChannel,y={signal:s.signal},E=()=>{c.close(),u.close(),h.close(),f.close(),g.close(),S.close(),b.close(),O.close()},L=dt(c).withOptions(y),d=dt(h).withOptions(y),w=dt(g).withOptions(y),P=dt(b).withOptions(y);let x=!1;const _=async bt=>{if(i==null||i(),x)return{done:!0};const He=await bt();return He.done&&(x=!0,E()),He},C=async bt=>{i==null||i(),await bt(),x=!0,E(),i=()=>{throw new Error("This generator has been disposed.")}},I={next:bt=>_(()=>d(bt)),return:bt=>_(()=>w(bt)),throw:bt=>_(()=>P(bt)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>C(()=>L()),[Symbol.asyncIterator]:()=>I};return t.postMessage([fn,{asyncDispose:u,next:f,return:S,throw:O},...l],[...s.transfer||[],u,f,S,O]),(G=s.signal)==null||G.addEventListener("abort",()=>{i=()=>{throw new Error("This generator has been aborted.")},E()},{once:!0}),I}},o=r({});return o.withOptions=r,o}const Ko=()=>yr?"*":me==="chatgpt"?"https://chatgpt.com":me==="feather"?"https://feather.openai.com":me==="skybridge"?"https://skybridge.oaistatic.com":"*",Jo=async(t,e=[])=>{if("serviceWorker"in navigator){const i=await navigator.serviceWorker.getRegistration();if(i)return await i.unregister(),window.location.reload(),null}const n=Object.fromEntries(Object.entries(t).map(([i,l])=>{var h;const{port1:c,port2:u}=new MessageChannel;return l&&(((h=l==null?void 0:l.constructor)==null?void 0:h.name)==="AsyncGeneratorFunction"?dn(c,l):dt(c,l)),[i,u]})),r=new MessageChannel;window.parent.postMessage({type:"init",ports:n,replyPort:r.port2},Ko(),[...Object.values(n),r.port2]);const o=await new Promise(i=>{r.port1.onmessage=l=>i(l.data),r.port1.start()}),s=new Set(e);return Object.fromEntries(Object.entries(o).map(([i,l])=>[i,s.has(i)?dn(l):dt(l)]))};async function*Qo(t,{html:e,props:n,theme:r,userAgent:o,features:s,safeArea:i}){let l;try{l=we({includePrivate:!1}),l.theme=r,l.userAgent=o,Object.assign(l,n)}catch{}yield*je({sandboxLogger:t,html:e,theme:r,features:s,additionalGlobals:l,safeArea:i,transformPosition:null,expectReadySignal:!1})}let ft=null;Jo({async*runUserCode(t){const e=new rt;try{const{runUserCode:n}=await zt(async()=>{const{runUserCode:r}=await import("./run-user-code-D71J3KWq.js");return{runUserCode:r}},[]);yield*n(e,t)}catch(n){e.environmentError(n)}},async buildUserCode(t){const e=new rt;try{const{buildUserCode:n}=await zt(async()=>{const{buildUserCode:r}=await import("./build-user-code-eLdotW7M.js");return{buildUserCode:r}},__vite__mapDeps([0,1]));return await n(e,t)}catch(n){e.environmentError(n)}return null},async prepareEnvironment(t){const e=new rt;try{const{prepareEnvironment:n}=await zt(async()=>{const{prepareEnvironment:r}=await import("./prepare-environment-D8y1G659.js");return{prepareEnvironment:r}},[]);await n(e,t)}catch(n){e.environmentError(n)}},async*runWidgetCode(t){const e=new rt;try{yield*zr(e,t)}catch(n){e.environmentError(n)}},async*runComponent(t){const e=new rt;try{yield*Qo(e,t)}catch(n){e.environmentError(n)}},async validate(t,e){const n=new rt;try{const{validateReact:r}=await zt(async()=>{const{validateReact:o}=await import("./validate-react-ClmdITXA.js");return{validateReact:o}},__vite__mapDeps([2,1,3]));return await r(n,t,e),!0}catch(r){const{parseAndLogTranspileError:o}=await zt(async()=>{const{parseAndLogTranspileError:s}=await import("./parse-transpile-error-BIfbTLtn.js");return{parseAndLogTranspileError:s}},__vite__mapDeps([4,3]));return o(n,r)??!1}},stop(){ft==null||ft.destroy(),ft=null,nr()},setEditMode:t=>{const e=new rt;try{ft??(ft=new Vo)}catch(n){e.environmentError(n);return}t?ft.enable():(ft==null||ft.destroy(),ft=null)},async screenshot(){var i;const t=et();if(!t)return null;const e=(i=t.contentDocument)==null?void 0:i.documentElement;if(!e)return null;const n=e.scrollLeft||0,r=e.scrollTop||0,{domToDataUrl:o}=await zt(async()=>{const{domToDataUrl:l}=await import("./index-CSSI_kxh.js");return{domToDataUrl:l}},[]);return{imageBase64:await o(e,{backgroundColor:"transparent"}),scrollX:n,scrollY:r}},async setAdditionalGlobals({additionalGlobals:t}){const e=new rt;try{kt({additionalGlobals:t,sandboxLogger:e})}catch(n){e.environmentError(n)}},async setWidgetProps({widgetId:t,widgetState:e,toolInput:n,toolOutput:r,toolResponseMetadata:o,subjectId:s=null}){const i=new rt;try{kt({additionalGlobals:{widget:{state:e,props:r,setState:l=>{var c,u;return(u=(c=$())==null?void 0:c.updateWidgetState)==null?void 0:u.call(c,t,l)}},...Ln({widgetId:t,globals:{toolInput:n,toolOutput:r,toolResponseMetadata:o,widgetState:e,subjectId:s},sandboxLogger:i})},sandboxLogger:i})}catch(l){i.environmentError(l)}},async setTheme({theme:t}){const e=new rt;try{Cn({theme:t}),kt({additionalGlobals:{theme:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async setSafeArea({safeArea:t}){const e=new rt;try{Rn({safeArea:t}),kt({additionalGlobals:{safeArea:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async navigate(t){const{navigation:e}=await zt(async()=>{const{navigation:n}=await Promise.resolve().then(()=>vr);return{navigation:n}},void 0);if("delta"in t){e.go(t.delta);return}if("popToRoot"in t){e.popToRoot();return}},getCurrentPath(){var e,n;const t=(n=(e=et())==null?void 0:e.contentWindow)==null?void 0:n.location;return t?`${t.pathname}${t.search}${t.hash}`:null}},["streamCompletion"]).then(t=>{t&&br(t)});export{bn as E,Pe as L,pt as M,rs as S,zt as _,Jn as a,M as b,Ar as c,$ as d,ss as e,os as f,we as g,je as r};
